SHELL=/bin/bash
PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin

# Start monitors on reboot
@reboot cd /home/ubuntu/wealthyrobot && nohup python3 -c "from agent_coordinator import AgentCoordinator as AC; AC().run_continuous_monitoring()" >/home/ubuntu/agent_coordinator.log 2>&1 &
@reboot cd /home/ubuntu/wealthyrobot && nohup python3 -c "from integrated_deployment_system import IntegratedDeploymentSystem as IDS; IDS().run_continuous_deployment()" >/home/ubuntu/deployment_monitor.log 2>&1 &

# Nightly visual QA and deploy (02:00 UTC)
0 2 * * * cd /home/ubuntu/wealthyrobot && python3 enhanced_visual_testing_agent.py >> /home/ubuntu/nightly_visual_qa.log 2>&1
10 2 * * * cd /home/ubuntu/wealthyrobot && python3 integrated_deployment_system.py >> /home/ubuntu/nightly_deploy.log 2>&1

# Weekly optimizer dry-run (Sunday 03:15 UTC)
15 3 * * 0 cd /home/ubuntu/wealthyrobot && OPTIMIZER_DRY_RUN=1 python3 optimizer_agent.py >> /home/ubuntu/optimizer.log 2>&1

# Monthly optimizer apply (1st day 03:25 UTC)
25 3 1 * * cd /home/ubuntu/wealthyrobot && OPTIMIZER_DRY_RUN=0 python3 optimizer_agent.py >> /home/ubuntu/optimizer.log 2>&1

# Weekly performance and competitor checks (Monday 04:00 UTC)
0 4 * * 1 cd /home/ubuntu/wealthyrobot && python3 pagespeed_budget_agent.py >> /home/ubuntu/pagespeed.log 2>&1
10 4 * * 1 cd /home/ubuntu/wealthyrobot && python3 competitor_watcher_agent.py >> /home/ubuntu/competitors.log 2>&1
